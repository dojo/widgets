{"version":3,"file":"Link.js","sourceRoot":"","sources":["../../../../src/routing/Link.ts"],"names":[],"mappings":";;;;;;;;;;;;IAAA,wDAAuD;IACvD,sCAAqC;IACrC,2DAA0D;IAK1D,IAAM,aAAa,GAAG,UAAC,MAAc,EAAE,UAA0B;QACxD,IAAA,kBAAE,EAAE,wBAAe,EAAf,oCAAe,EAAE,sBAAW,EAAX,gCAAW,EAAE,4BAAO,EAAE,2EAAQ,CAAgB;QAC3E,IAAM,IAAI,GAAG,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;QAErD,IAAM,aAAa,GAAG,UAAC,KAAiB;YACvC,OAAO,IAAI,OAAO,CAAC,KAAK,CAAC,CAAC;YAE1B,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,gBAAgB,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC;gBACzE,KAAK,CAAC,cAAc,EAAE,CAAC;gBACvB,IAAI,KAAK,SAAS,IAAI,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YAC5C,CAAC;QACF,CAAC,CAAC;QACF,MAAM,oBACL,IAAI,MAAA,EACJ,OAAO,EAAE,aAAa,IACnB,KAAK,EACP;IACH,CAAC,CAAC;IAEF;QAA8B,oCAA0B;QAAxD;;QAkBA,CAAC;QAjBQ,2BAAQ,GAAhB,UAAiB,KAAiB;YACjC,IAAI,CAAC,UAAU,CAAC,OAAO,IAAI,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QAC3D,CAAC;QAES,yBAAM,GAAhB;YACC,IAAM,KAAK,wBACP,IAAI,CAAC,UAAU,IAClB,OAAO,EAAE,IAAI,CAAC,QAAQ,EACtB,OAAO,EAAE,SAAS,EAClB,EAAE,EAAE,SAAS,EACb,QAAQ,EAAE,SAAS,EACnB,MAAM,EAAE,SAAS,EACjB,SAAS,EAAE,SAAS,EACpB,MAAM,EAAE,SAAS,GACjB,CAAC;YACF,MAAM,CAAC,KAAC,CAAC,GAAG,EAAE,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;QACrC,CAAC;QACF,eAAC;IAAD,CAAC,AAlBD,CAA8B,uBAAU,GAkBvC;IAlBY,4BAAQ;IAoBrB,oBAA2B,SAAiB;QAE3C;YAAmB,gCAAQ;YAA3B;;YAA6B,CAAC;YAAxB,IAAI;gBADT,eAAM,CAAC,EAAE,IAAI,EAAE,SAAS,EAAE,aAAa,eAAA,EAAE,CAAC;eACrC,IAAI,CAAoB;YAAD,WAAC;SAAA,AAA9B,CAAmB,QAAQ,GAAG;QAC9B,MAAM,CAAC,IAAI,CAAC;IACb,CAAC;IAJD,gCAIC;IAEY,QAAA,IAAI,GAAG,UAAU,CAAC,QAAQ,CAAC,CAAC;IAEzC,kBAAe,YAAI,CAAC","sourcesContent":["import { WidgetBase } from '../widget-core/WidgetBase';\nimport { v } from '../widget-core/d';\nimport { inject } from '../widget-core/decorators/inject';\nimport { Constructor, DNode, VNodeProperties } from '../widget-core/interfaces';\nimport { LinkProperties } from './interfaces';\nimport { Router } from './Router';\n\nconst getProperties = (router: Router, properties: LinkProperties): VNodeProperties => {\n\tconst { to, isOutlet = true, params = {}, onClick, ...props } = properties;\n\tconst href = isOutlet ? router.link(to, params) : to;\n\n\tconst handleOnClick = (event: MouseEvent) => {\n\t\tonClick && onClick(event);\n\n\t\tif (!event.defaultPrevented && event.button === 0 && !properties.target) {\n\t\t\tevent.preventDefault();\n\t\t\thref !== undefined && router.setPath(href);\n\t\t}\n\t};\n\treturn {\n\t\thref,\n\t\tonClick: handleOnClick,\n\t\t...props\n\t};\n};\n\nexport class BaseLink extends WidgetBase<LinkProperties> {\n\tprivate _onClick(event: MouseEvent): void {\n\t\tthis.properties.onClick && this.properties.onClick(event);\n\t}\n\n\tprotected render(): DNode {\n\t\tconst props = {\n\t\t\t...this.properties,\n\t\t\tonclick: this._onClick,\n\t\t\tonClick: undefined,\n\t\t\tto: undefined,\n\t\t\tisOutlet: undefined,\n\t\t\tparams: undefined,\n\t\t\trouterKey: undefined,\n\t\t\trouter: undefined\n\t\t};\n\t\treturn v('a', props, this.children);\n\t}\n}\n\nexport function createLink(routerKey: string): Constructor<BaseLink> {\n\t@inject({ name: routerKey, getProperties })\n\tclass Link extends BaseLink {}\n\treturn Link;\n}\n\nexport const Link = createLink('router');\n\nexport default Link;\n"]}