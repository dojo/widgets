{"version":3,"file":"Focus.js","sourceRoot":"","sources":["Focus.ts"],"names":[],"mappings":";;;;;;;;;;;;IAEA,6DAA4D;IAY5D,mBAAmB,gBAA0B,EAAE,WAAqB;QACnE,IAAM,MAAM,GAAG,WAAW,IAAI,WAAW,EAAE,CAAC;QAC5C,MAAM,CAAC;YACN,OAAO,EAAE,MAAM;YACf,KAAK,EAAE,WAAW;SAClB,CAAC;IACH,CAAC;IAED,oBAA+E,IAAO;QACrF;YAA6B,iCAAI;YAAjC;gBAAA,qEAsBC;gBAnBQ,mBAAa,GAAG,CAAC,CAAC;gBAElB,oBAAc,GAAG,CAAC,CAAC;gBAOpB,iBAAW,GAAG;oBACpB,IAAM,MAAM,GAAG,KAAI,CAAC,aAAa,KAAK,KAAI,CAAC,cAAc,CAAC;oBAC1D,KAAI,CAAC,cAAc,GAAG,KAAI,CAAC,aAAa,CAAC;oBACzC,MAAM,CAAC,MAAM,CAAC;gBACf,CAAC,CAAC;;YAMH,CAAC;YAdU,iCAAiB,GAA3B;gBACC,IAAI,CAAC,aAAa,EAAE,CAAC;YACtB,CAAC;YAQM,qBAAK,GAAZ;gBACC,IAAI,CAAC,aAAa,EAAE,CAAC;gBACrB,IAAI,CAAC,UAAU,EAAE,CAAC;YACnB,CAAC;YAbD;gBADC,2BAAY,CAAC,OAAO,EAAE,SAAS,CAAC;0DAGhC;YAYF,YAAC;SAAA,AAtBD,CAA6B,IAAI,GAsBhC;QACD,MAAM,CAAC,KAAK,CAAC;IACd,CAAC;IAzBD,gCAyBC;IAED,kBAAe,UAAU,CAAC","sourcesContent":["import { Constructor } from './../interfaces';\nimport { WidgetBase } from './../WidgetBase';\nimport { diffProperty } from './../decorators/diffProperty';\n\nexport interface FocusProperties {\n\tfocus?: (() => boolean);\n}\n\nexport interface FocusMixin {\n\tfocus: () => void;\n\tshouldFocus: () => boolean;\n\tproperties: FocusProperties;\n}\n\nfunction diffFocus(previousProperty: Function, newProperty: Function) {\n\tconst result = newProperty && newProperty();\n\treturn {\n\t\tchanged: result,\n\t\tvalue: newProperty\n\t};\n}\n\nexport function FocusMixin<T extends Constructor<WidgetBase<FocusProperties>>>(Base: T): T & Constructor<FocusMixin> {\n\tabstract class Focus extends Base {\n\t\tpublic abstract properties: FocusProperties;\n\n\t\tprivate _currentToken = 0;\n\n\t\tprivate _previousToken = 0;\n\n\t\t@diffProperty('focus', diffFocus)\n\t\tprotected isFocusedReaction() {\n\t\t\tthis._currentToken++;\n\t\t}\n\n\t\tpublic shouldFocus = () => {\n\t\t\tconst result = this._currentToken !== this._previousToken;\n\t\t\tthis._previousToken = this._currentToken;\n\t\t\treturn result;\n\t\t};\n\n\t\tpublic focus() {\n\t\t\tthis._currentToken++;\n\t\t\tthis.invalidate();\n\t\t}\n\t}\n\treturn Focus;\n}\n\nexport default FocusMixin;\n"]}