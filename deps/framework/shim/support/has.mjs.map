{"version":3,"file":"has.mjs","sourceRoot":"","sources":["../../../../../src/shim/support/has.ts"],"names":[],"mappings":"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","sourcesContent":["import has, { add } from '../../has/has';\nimport global from '../global';\n\nexport default has;\nexport * from '../../has/has';\n\n/* ECMAScript 6 and 7 Features */\n\n/* Array */\nadd(\n\t'es6-array',\n\t() => {\n\t\treturn (\n\t\t\t['from', 'of'].every((key) => key in global.Array) &&\n\t\t\t['findIndex', 'find', 'copyWithin'].every((key) => key in global.Array.prototype)\n\t\t);\n\t},\n\ttrue\n);\n\nadd(\n\t'es6-array-fill',\n\t() => {\n\t\tif ('fill' in global.Array.prototype) {\n\t\t\t/* Some versions of Safari do not properly implement this */\n\t\t\treturn (<any>[1]).fill(9, Number.POSITIVE_INFINITY)[0] === 1;\n\t\t}\n\t\treturn false;\n\t},\n\ttrue\n);\n\nadd('es7-array', () => 'includes' in global.Array.prototype, true);\n\n/* Map */\nadd(\n\t'es6-map',\n\t() => {\n\t\tif (typeof global.Map === 'function') {\n\t\t\t/*\n\t\tIE11 and older versions of Safari are missing critical ES6 Map functionality\n\t\tWe wrap this in a try/catch because sometimes the Map constructor exists, but does not\n\t\ttake arguments (iOS 8.4)\n\t\t */\n\t\t\ttry {\n\t\t\t\tconst map = new global.Map([[0, 1]]);\n\n\t\t\t\treturn (\n\t\t\t\t\tmap.has(0) &&\n\t\t\t\t\ttypeof map.keys === 'function' &&\n\t\t\t\t\thas('es6-symbol') &&\n\t\t\t\t\ttypeof map.values === 'function' &&\n\t\t\t\t\ttypeof map.entries === 'function'\n\t\t\t\t);\n\t\t\t} catch (e) {\n\t\t\t\t/* istanbul ignore next: not testing on iOS at the moment */\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\ttrue\n);\n\n/* Math */\nadd(\n\t'es6-math',\n\t() => {\n\t\treturn [\n\t\t\t'clz32',\n\t\t\t'sign',\n\t\t\t'log10',\n\t\t\t'log2',\n\t\t\t'log1p',\n\t\t\t'expm1',\n\t\t\t'cosh',\n\t\t\t'sinh',\n\t\t\t'tanh',\n\t\t\t'acosh',\n\t\t\t'asinh',\n\t\t\t'atanh',\n\t\t\t'trunc',\n\t\t\t'fround',\n\t\t\t'cbrt',\n\t\t\t'hypot'\n\t\t].every((name) => typeof global.Math[name] === 'function');\n\t},\n\ttrue\n);\n\nadd(\n\t'es6-math-imul',\n\t() => {\n\t\tif ('imul' in global.Math) {\n\t\t\t/* Some versions of Safari on ios do not properly implement this */\n\t\t\treturn (<any>Math).imul(0xffffffff, 5) === -5;\n\t\t}\n\t\treturn false;\n\t},\n\ttrue\n);\n\n/* Object */\nadd(\n\t'es6-object',\n\t() => {\n\t\treturn (\n\t\t\thas('es6-symbol') &&\n\t\t\t['assign', 'is', 'getOwnPropertySymbols', 'setPrototypeOf'].every(\n\t\t\t\t(name) => typeof global.Object[name] === 'function'\n\t\t\t)\n\t\t);\n\t},\n\ttrue\n);\n\nadd(\n\t'es2017-object',\n\t() => {\n\t\treturn ['values', 'entries', 'getOwnPropertyDescriptors'].every(\n\t\t\t(name) => typeof global.Object[name] === 'function'\n\t\t);\n\t},\n\ttrue\n);\n\n/* Observable */\nadd('es-observable', () => typeof global.Observable !== 'undefined', true);\n\n/* Promise */\nadd('es6-promise', () => typeof global.Promise !== 'undefined' && has('es6-symbol'), true);\n\n/* Set */\nadd(\n\t'es6-set',\n\t() => {\n\t\tif (typeof global.Set === 'function') {\n\t\t\t/* IE11 and older versions of Safari are missing critical ES6 Set functionality */\n\t\t\tconst set = new global.Set([1]);\n\t\t\treturn set.has(1) && 'keys' in set && typeof set.keys === 'function' && has('es6-symbol');\n\t\t}\n\t\treturn false;\n\t},\n\ttrue\n);\n\n/* String */\nadd(\n\t'es6-string',\n\t() => {\n\t\treturn (\n\t\t\t[\n\t\t\t\t/* static methods */\n\t\t\t\t'fromCodePoint'\n\t\t\t].every((key) => typeof global.String[key] === 'function') &&\n\t\t\t[\n\t\t\t\t/* instance methods */\n\t\t\t\t'codePointAt',\n\t\t\t\t'normalize',\n\t\t\t\t'repeat',\n\t\t\t\t'startsWith',\n\t\t\t\t'endsWith',\n\t\t\t\t'includes'\n\t\t\t].every((key) => typeof global.String.prototype[key] === 'function')\n\t\t);\n\t},\n\ttrue\n);\n\nadd(\n\t'es6-string-raw',\n\t() => {\n\t\tfunction getCallSite(callSite: TemplateStringsArray, ...substitutions: any[]) {\n\t\t\tconst result = [...callSite];\n\t\t\t(result as any).raw = callSite.raw;\n\t\t\treturn result;\n\t\t}\n\n\t\tif ('raw' in global.String) {\n\t\t\tlet b = 1;\n\t\t\tlet callSite = getCallSite`a\\n${b}`;\n\n\t\t\t(callSite as any).raw = ['a\\\\n'];\n\t\t\tconst supportsTrunc = global.String.raw(callSite, 42) === 'a:\\\\n';\n\n\t\t\treturn supportsTrunc;\n\t\t}\n\n\t\treturn false;\n\t},\n\ttrue\n);\n\nadd(\n\t'es2017-string',\n\t() => {\n\t\treturn ['padStart', 'padEnd'].every((key) => typeof global.String.prototype[key] === 'function');\n\t},\n\ttrue\n);\n\n/* Symbol */\nadd('es6-symbol', () => typeof global.Symbol !== 'undefined' && typeof Symbol() === 'symbol', true);\n\n/* WeakMap */\nadd(\n\t'es6-weakmap',\n\t() => {\n\t\tif (typeof global.WeakMap !== 'undefined') {\n\t\t\t/* IE11 and older versions of Safari are missing critical ES6 Map functionality */\n\t\t\tconst key1 = {};\n\t\t\tconst key2 = {};\n\t\t\tconst map = new global.WeakMap([[key1, 1]]);\n\t\t\tObject.freeze(key1);\n\t\t\treturn map.get(key1) === 1 && map.set(key2, 2) === map && has('es6-symbol');\n\t\t}\n\t\treturn false;\n\t},\n\ttrue\n);\n\n/* Miscellaneous features */\nadd('microtasks', () => has('es6-promise') || has('host-node') || has('dom-mutationobserver'), true);\nadd(\n\t'postmessage',\n\t() => {\n\t\t// If window is undefined, and we have postMessage, it probably means we're in a web worker. Web workers have\n\t\t// post message but it doesn't work how we expect it to, so it's best just to pretend it doesn't exist.\n\t\treturn typeof global.window !== 'undefined' && typeof global.postMessage === 'function';\n\t},\n\ttrue\n);\nadd('raf', () => typeof global.requestAnimationFrame === 'function', true);\nadd('setimmediate', () => typeof global.setImmediate !== 'undefined', true);\n\n/* DOM Features */\n\nadd(\n\t'dom-mutationobserver',\n\t() => {\n\t\tif (has('host-browser') && Boolean(global.MutationObserver || global.WebKitMutationObserver)) {\n\t\t\t// IE11 has an unreliable MutationObserver implementation where setProperty() does not\n\t\t\t// generate a mutation event, observers can crash, and the queue does not drain\n\t\t\t// reliably. The following feature test was adapted from\n\t\t\t// https://gist.github.com/t10ko/4aceb8c71681fdb275e33efe5e576b14\n\t\t\tconst example = document.createElement('div');\n\t\t\t/* tslint:disable-next-line:variable-name */\n\t\t\tconst HostMutationObserver = global.MutationObserver || global.WebKitMutationObserver;\n\t\t\tconst observer = new HostMutationObserver(function() {});\n\t\t\tobserver.observe(example, { attributes: true });\n\n\t\t\texample.style.setProperty('display', 'block');\n\n\t\t\treturn Boolean(observer.takeRecords().length);\n\t\t}\n\t\treturn false;\n\t},\n\ttrue\n);\n\nadd(\n\t'dom-webanimation',\n\t() => has('host-browser') && global.Animation !== undefined && global.KeyframeEffect !== undefined,\n\ttrue\n);\n"]}