{"version":3,"file":"has.js","sourceRoot":"","sources":["../../../../../src/shim/support/has.ts"],"names":[],"mappings":"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","sourcesContent":["import has, { add } from '../../has/has';\nimport global from '../global';\n\nexport default has;\nexport * from '../../has/has';\n\n/* ECMAScript 6 and 7 Features */\n\n/* Array */\nadd(\n\t'es6-array',\n\t() => {\n\t\treturn (\n\t\t\t['from', 'of'].every((key) => key in global.Array) &&\n\t\t\t['findIndex', 'find', 'copyWithin'].every((key) => key in global.Array.prototype)\n\t\t);\n\t},\n\ttrue\n);\n\nadd(\n\t'es6-array-fill',\n\t() => {\n\t\tif ('fill' in global.Array.prototype) {\n\t\t\t/* Some versions of Safari do not properly implement this */\n\t\t\treturn (<any>[1]).fill(9, Number.POSITIVE_INFINITY)[0] === 1;\n\t\t}\n\t\treturn false;\n\t},\n\ttrue\n);\n\nadd('es7-array', () => 'includes' in global.Array.prototype, true);\n\n/* Map */\nadd(\n\t'es6-map',\n\t() => {\n\t\tif (typeof global.Map === 'function') {\n\t\t\t/*\n\t\tIE11 and older versions of Safari are missing critical ES6 Map functionality\n\t\tWe wrap this in a try/catch because sometimes the Map constructor exists, but does not\n\t\ttake arguments (iOS 8.4)\n\t\t */\n\t\t\ttry {\n\t\t\t\tconst map = new global.Map([[0, 1]]);\n\n\t\t\t\treturn (\n\t\t\t\t\tmap.has(0) &&\n\t\t\t\t\ttypeof map.keys === 'function' &&\n\t\t\t\t\thas('es6-symbol') &&\n\t\t\t\t\ttypeof map.values === 'function' &&\n\t\t\t\t\ttypeof map.entries === 'function'\n\t\t\t\t);\n\t\t\t} catch (e) {\n\t\t\t\t/* istanbul ignore next: not testing on iOS at the moment */\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\ttrue\n);\n\n/* Math */\nadd(\n\t'es6-math',\n\t() => {\n\t\treturn [\n\t\t\t'clz32',\n\t\t\t'sign',\n\t\t\t'log10',\n\t\t\t'log2',\n\t\t\t'log1p',\n\t\t\t'expm1',\n\t\t\t'cosh',\n\t\t\t'sinh',\n\t\t\t'tanh',\n\t\t\t'acosh',\n\t\t\t'asinh',\n\t\t\t'atanh',\n\t\t\t'trunc',\n\t\t\t'fround',\n\t\t\t'cbrt',\n\t\t\t'hypot'\n\t\t].every((name) => typeof global.Math[name] === 'function');\n\t},\n\ttrue\n);\n\nadd(\n\t'es6-math-imul',\n\t() => {\n\t\tif ('imul' in global.Math) {\n\t\t\t/* Some versions of Safari on ios do not properly implement this */\n\t\t\treturn (<any>Math).imul(0xffffffff, 5) === -5;\n\t\t}\n\t\treturn false;\n\t},\n\ttrue\n);\n\n/* Object */\nadd(\n\t'es6-object',\n\t() => {\n\t\treturn (\n\t\t\thas('es6-symbol') &&\n\t\t\t['assign', 'is', 'getOwnPropertySymbols', 'setPrototypeOf'].every(\n\t\t\t\t(name) => typeof global.Object[name] === 'function'\n\t\t\t)\n\t\t);\n\t},\n\ttrue\n);\n\nadd(\n\t'es2017-object',\n\t() => {\n\t\treturn ['values', 'entries', 'getOwnPropertyDescriptors'].every(\n\t\t\t(name) => typeof global.Object[name] === 'function'\n\t\t);\n\t},\n\ttrue\n);\n\n/* Observable */\nadd('es-observable', () => typeof global.Observable !== 'undefined', true);\n\n/* Promise */\nadd('es6-promise', () => typeof global.Promise !== 'undefined' && has('es6-symbol'), true);\n\n/* Set */\nadd(\n\t'es6-set',\n\t() => {\n\t\tif (typeof global.Set === 'function') {\n\t\t\t/* IE11 and older versions of Safari are missing critical ES6 Set functionality */\n\t\t\tconst set = new global.Set([1]);\n\t\t\treturn set.has(1) && 'keys' in set && typeof set.keys === 'function' && has('es6-symbol');\n\t\t}\n\t\treturn false;\n\t},\n\ttrue\n);\n\n/* String */\nadd(\n\t'es6-string',\n\t() => {\n\t\treturn (\n\t\t\t[\n\t\t\t\t/* static methods */\n\t\t\t\t'fromCodePoint'\n\t\t\t].every((key) => typeof global.String[key] === 'function') &&\n\t\t\t[\n\t\t\t\t/* instance methods */\n\t\t\t\t'codePointAt',\n\t\t\t\t'normalize',\n\t\t\t\t'repeat',\n\t\t\t\t'startsWith',\n\t\t\t\t'endsWith',\n\t\t\t\t'includes'\n\t\t\t].every((key) => typeof global.String.prototype[key] === 'function')\n\t\t);\n\t},\n\ttrue\n);\n\nadd(\n\t'es6-string-raw',\n\t() => {\n\t\tfunction getCallSite(callSite: TemplateStringsArray, ...substitutions: any[]) {\n\t\t\tconst result = [...callSite];\n\t\t\t(result as any).raw = callSite.raw;\n\t\t\treturn result;\n\t\t}\n\n\t\tif ('raw' in global.String) {\n\t\t\tlet b = 1;\n\t\t\tlet callSite = getCallSite`a\\n${b}`;\n\n\t\t\t(callSite as any).raw = ['a\\\\n'];\n\t\t\tconst supportsTrunc = global.String.raw(callSite, 42) === 'a:\\\\n';\n\n\t\t\treturn supportsTrunc;\n\t\t}\n\n\t\treturn false;\n\t},\n\ttrue\n);\n\nadd(\n\t'es2017-string',\n\t() => {\n\t\treturn ['padStart', 'padEnd'].every((key) => typeof global.String.prototype[key] === 'function');\n\t},\n\ttrue\n);\n\n/* Symbol */\nadd('es6-symbol', () => typeof global.Symbol !== 'undefined' && typeof Symbol() === 'symbol', true);\n\n/* WeakMap */\nadd(\n\t'es6-weakmap',\n\t() => {\n\t\tif (typeof global.WeakMap !== 'undefined') {\n\t\t\t/* IE11 and older versions of Safari are missing critical ES6 Map functionality */\n\t\t\tconst key1 = {};\n\t\t\tconst key2 = {};\n\t\t\tconst map = new global.WeakMap([[key1, 1]]);\n\t\t\tObject.freeze(key1);\n\t\t\treturn map.get(key1) === 1 && map.set(key2, 2) === map && has('es6-symbol');\n\t\t}\n\t\treturn false;\n\t},\n\ttrue\n);\n\n/* Miscellaneous features */\nadd('microtasks', () => has('es6-promise') || has('host-node') || has('dom-mutationobserver'), true);\nadd(\n\t'postmessage',\n\t() => {\n\t\t// If window is undefined, and we have postMessage, it probably means we're in a web worker. Web workers have\n\t\t// post message but it doesn't work how we expect it to, so it's best just to pretend it doesn't exist.\n\t\treturn typeof global.window !== 'undefined' && typeof global.postMessage === 'function';\n\t},\n\ttrue\n);\nadd('raf', () => typeof global.requestAnimationFrame === 'function', true);\nadd('setimmediate', () => typeof global.setImmediate !== 'undefined', true);\n\n/* DOM Features */\n\nadd(\n\t'dom-mutationobserver',\n\t() => {\n\t\tif (has('host-browser') && Boolean(global.MutationObserver || global.WebKitMutationObserver)) {\n\t\t\t// IE11 has an unreliable MutationObserver implementation where setProperty() does not\n\t\t\t// generate a mutation event, observers can crash, and the queue does not drain\n\t\t\t// reliably. The following feature test was adapted from\n\t\t\t// https://gist.github.com/t10ko/4aceb8c71681fdb275e33efe5e576b14\n\t\t\tconst example = document.createElement('div');\n\t\t\t/* tslint:disable-next-line:variable-name */\n\t\t\tconst HostMutationObserver = global.MutationObserver || global.WebKitMutationObserver;\n\t\t\tconst observer = new HostMutationObserver(function() {});\n\t\t\tobserver.observe(example, { attributes: true });\n\n\t\t\texample.style.setProperty('display', 'block');\n\n\t\t\treturn Boolean(observer.takeRecords().length);\n\t\t}\n\t\treturn false;\n\t},\n\ttrue\n);\n\nadd(\n\t'dom-webanimation',\n\t() => has('host-browser') && global.Animation !== undefined && global.KeyframeEffect !== undefined,\n\ttrue\n);\n"]}